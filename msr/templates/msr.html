{% extends 'base.html' %}
{% block title %}
  MSR Page
{% endblock %}

{% block content %}

<script type=text/javascript>
    $(function() {
      $('a#processar').bind('click', function() {
        $.getJSON('/processar', function(data) {
          $("#TaskIdProcessar").text(data.TaskId);
        });
        return false;
      });
    });
</script>

      <table class="table table-hover table">
        <thead>
            <tr>
                <!-- Your Columns HERE -->
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Link</th>
                <th scope="col">Created</th>
                <th scope="col">Analysed</th>
                <th scope="col">Analysis</th>
                <th scope="col">Options</th>
            </tr>
        </thead>
        <tbody>
            <!-- Your rows inside the table HERE: -->
            {% for repository in repositories %}
                <tr>
                    <td>{{ repository.id }}</td>
                    <td>{{ repository.name }}</td>
                    <td>{{ repository.link }}</td>
                    <td>{{ repository.creation_date }}</td>
                    <td>{{ repository.analysis_date }}</td>
                    <td>{{ repository.analysed }}</td>
                    <td>
                      <a href="{{ url_for('visualizar_analise_repositorio', id=repository.id) }}">Mais...</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <a href="{{ url_for('criar') }}">Cadastrar novo(s) repositório(s)</a> 
    <br>
    <a href='#' id='processar'>Processar o(s) repositório(s) enfileirado(s)</a> <span id='TaskIdProcessar'>?</span>

{% endblock %}